!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).milestones=n()}(this,function(){"use strict";function l(t,n){this.v=t,this.k=n}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function Tt(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=d(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw i}}}}function c(){var p,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function r(t,n,e,r){var i,o,u,a,c,l,f,s,h,n=n&&n.prototype instanceof y?n:y,n=Object.create(n.prototype);return m(n,"_invoke",(i=t,o=e,f=r||[],s=!1,h={p:l=0,n:0,v:p,a:d,f:d.bind(p,4),d:function(t,n){return u=t,a=0,c=p,h.n=n,g}},function(t,n,e){if(1<l)throw TypeError("Generator is already running");for(s&&1===n&&d(n,e),a=n,c=e;(v=a<2?p:c)||!s;){u||(a?a<3?(1<a&&(h.n=-1),d(a,c)):h.n=c:h.v=c);try{if(l=2,u){if(v=u[t=!a?"next":t]){if(!(v=v.call(u,c)))throw TypeError("iterator result is not an object");if(!v.done)return v;c=v.value,a<2&&(a=0)}else 1===a&&(v=u.return)&&v.call(u),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);u=p}else if((v=(s=h.n<0)?c:i.call(o,h))!==g)break}catch(t){u=p,a=1,c=t}finally{l=1}}return{value:v,done:s}}),!0),n;function d(t,n){for(a=t,c=n,v=0;!s&&l&&!e&&v<f.length;v++){var e,r=f[v],i=h.p,o=r[2];3<t?(e=o===n)&&(c=r[(a=r[4])?5:a=3],r[4]=r[5]=p):r[0]<=i&&((e=t<2&&i<r[1])?(a=0,h.v=n,h.n=r[1]):i<o&&(e=t<3||r[0]>n||o<n)&&(r[4]=t,r[5]=n,h.n=o,a=0))}if(e||1<t)return g;throw s=!0,n}}var g={};function y(){}function i(){}function o(){}var v=Object.getPrototypeOf,t=[][n]?v(v([][n]())):(m(v={},n,function(){return this}),v),u=o.prototype=y.prototype=Object.create(t);function a(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,m(t,e,"GeneratorFunction")),t.prototype=Object.create(u),t}return m(u,"constructor",i.prototype=o),m(o,"constructor",i),m(o,e,i.displayName="GeneratorFunction"),m(u),m(u,e,"Generator"),m(u,n,function(){return this}),m(u,"toString",function(){return"[object Generator]"}),(c=function(){return{w:r,m:a}})()}function a(t,n,e,r,i){return new f(c().w(t,n,e,r),i||Promise)}function f(a,c){var i;this.next||(m(f.prototype),m(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),m(this,"_invoke",function(e,t,r){function n(){return new c(function(t,n){!function n(t,e,r,i){try{var o=a[t](e),u=o.value;return u instanceof l?c.resolve(u.v).then(function(t){n("next",t,r,i)},function(t){n("throw",t,r,i)}):c.resolve(u).then(function(t){o.value=t,r(o)},function(t){return n("throw",t,r,i)})}catch(t){i(t)}}(e,r,t,n)})}return i=i?i.then(n,n):n()},!0)}function m(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(m=function(t,n,e,r){function i(n,e){m(t,n,function(t){return this._invoke(n,e,t)})}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))})(t,n,e,r)}function s(t){var n,e=Object(t),r=[];for(n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}}function h(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&e>=t.length?void 0:t)&&t[e++],done:!t}}}}throw new TypeError(typeof t+" is not iterable")}function At(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,o,u,a=[],c=!0,l=!1;try{if(o=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;c=!1}else for(;!(c=(r=o.call(e)).done)&&(a.push(r.value),a.length!==n);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=e.return&&(u=e.return(),Object(u)!==u))return}finally{if(l)throw i}}return a}}(t,n)||d(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,n){if(t){if("string"==typeof t)return r(t,n);var e={}.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}function p(){var i=c(),t=i.m(p),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function o(t){t="function"==typeof t&&t.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}var e={throw:1,return:2,break:3,continue:3};function u(t){var i,o;return function(r){i||(i={stop:function(){return o(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return o(r.a,e[t],n)},delegateYield:function(t,n,e){return i.resultName=n,o(r.d,h(t),e)},finish:function(t){return o(r.f,t)}},o=function(t,n,e){r.p=i.prev,r.n=i.next;try{return t(n,e)}finally{i.next=r.n}}),i.resultName&&(i[i.resultName]=r.v,i.resultName=void 0),i.sent=r.v,i.next=r.n;try{return t.call(this,i)}finally{r.p=i.prev,r.n=i.next}}}return(p=function(){return{wrap:function(t,n,e,r){return i.w(u(t),n,e,r&&r.reverse())},isGeneratorFunction:o,mark:i.m,awrap:function(t,n){return new l(t,n)},AsyncIterator:f,async:function(t,n,e,r,i){return(o(n)?a:function(t,n,e,r,i){var o=a(t,n,e,r,i);return o.next().then(function(t){return t.done?t.value:o.next()})})(u(t),n,e,r,i)},keys:s,values:h}})()}var i="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function u(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),o.hasOwnProperty(n)?{space:o[n],local:t}:t}function g(t){t=u(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===i&&t.documentElement.namespaceURI===i?t.createElement(e):t.createElementNS(n,e)}})(t)}function n(){}function y(t){return null==t?n:function(){return this.querySelector(t)}}function v(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function b(){return[]}function e(n){return function(t){return t.matches(n)}}var w=Array.prototype.find;function x(){return this.firstElementChild}var M=Array.prototype.filter;function T(){return Array.from(this.children)}function t(t){return new Array(t.length)}function A(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function S(t,n,e,r,i,o){for(var u,a=0,c=n.length,l=o.length;a<l;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new A(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function k(t,n,e,r,i,o,u){for(var a,c,l=new Map,f=n.length,s=o.length,h=new Array(f),d=0;d<f;++d)(a=n[d])&&(h[d]=c=u.call(a,a.__data__,d,n)+"",l.has(c)?i[d]=a:l.set(c,a));for(d=0;d<s;++d)c=u.call(t,o[d],d,o)+"",(a=l.get(c))?((r[d]=a).__data__=o[d],l.delete(c)):e[d]=new A(t,o[d]);for(d=0;d<f;++d)(a=n[d])&&l.get(h[d])===a&&(i[d]=a)}function C(t){return t.__data__}function N(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function U(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function D(t){return t.trim().split(/^|\s+/)}function E(t){return t.classList||new j(t)}function j(t){this._node=t,this._names=D(t.getAttribute("class")||"")}function O(t,n){for(var e=E(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function F(t,n){for(var e=E(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function I(){this.textContent=""}function Y(){this.innerHTML=""}function H(){this.nextSibling&&this.parentNode.appendChild(this)}function L(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R(){return null}function z(){var t=this.parentNode;t&&t.removeChild(this)}function q(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function P(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function B(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function G(u,a,c){return function(){var t,n,e=this.__on,r=(n=a,function(t){n.call(this,t,this.__data__)});if(e)for(var i=0,o=e.length;i<o;++i)if((t=e[i]).type===u.type&&t.name===u.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=c),void(t.value=a);this.addEventListener(u.type,r,c),t={type:u.type,name:u.name,value:a,listener:r,options:c},e?e.push(t):this.__on=[t]}}function Z(t,n,e){var r=U(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}A.prototype={constructor:A,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},j.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var V=p().mark(Q);function Q(){var n,e,r,i,o,u,a;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this._groups,e=0,r=n.length;case 1:if(!(e<r)){t.next=13;break}i=n[e],o=0,u=i.length;case 3:if(!(o<u)){t.next=10;break}if(a=i[o])return t.next=7,a;t.next=7;break;case 7:++o,t.next=3;break;case 10:++e,t.next=1;break;case 13:case"end":return t.stop()}},V,this)}var W=[null];function $(t,n){this._groups=t,this._parents=n}function St(t){return"string"==typeof t?new $([[document.querySelector(t)]],[document.documentElement]):new $([[t]],W)}function kt(t){return"string"==typeof t?new $([document.querySelectorAll(t)],[document.documentElement]):new $([v(t)],W)}function X(t,n){return null==t||null==n?NaN:t<n?-1:n<t?1:n<=t?0:NaN}function J(e){var o,u,i;function a(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length;if(e<r){if(0!==o(n,n))return r;do{var i=e+r>>>1}while(u(t[i],n)<0?e=1+i:r=i,e<r)}return e}return i=2!==e.length?(o=X,u=function(t,n){return X(e(t),n)},function(t,n){return e(t)-n}):(o=e===X||e===function(t,n){return null==t||null==n?NaN:n<t?-1:t<n?1:t<=n?0:NaN}?e:K,u=e),{left:a,center:function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=a(t,n,e,(3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length)-1);return e<r&&i(t[r-1],n)>-i(t[r],n)?r-1:r},right:function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t.length;if(e<r){if(0!==o(n,n))return r;do{var i=e+r>>>1}while(u(t[i],n)<=0?e=1+i:r=i,e<r)}return e}}}function K(){return 0}$.prototype=(st={constructor:$,select:function(t){"function"!=typeof t&&(t=y(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],c=a.length,l=r[i]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u);return new $(r,this._parents)},selectAll:function(t){var n,e;t="function"==typeof t?(e=t,function(){return v(e.apply(this,arguments))}):null==(n=t)?b:function(){return this.querySelectorAll(n)};for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var c,l=r[a],f=l.length,s=0;s<f;++s)(c=l[s])&&(o.push(t.call(c,c.__data__,s,l)),u.push(c));return new $(o,u)},selectChild:function(t){return this.select(null==t?x:(n="function"==typeof t?t:e(t),function(){return w.call(this.children,n)}));var n},selectChildren:function(t){return this.selectAll(null==t?T:(n="function"==typeof t?t:e(t),function(){return M.call(this.children,n)}));var n},filter:function(t){var n;"function"!=typeof t&&(n=t,t=function(){return this.matches(n)});for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var u,a=e[o],c=a.length,l=i[o]=[],f=0;f<c;++f)(u=a[f])&&t.call(u,u.__data__,f,a)&&l.push(u);return new $(i,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,C);var e,r=n?k:S,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var u=o.length,a=new Array(u),c=new Array(u),l=new Array(u),f=0;f<u;++f){var s=i[f],h=o[f],d=h.length,p="object"===_(p=t.call(s,s&&s.__data__,f,i))&&"length"in p?p:Array.from(p),g=p.length,y=c[f]=new Array(g),v=a[f]=new Array(g);r(s,h,y,v,l[f]=new Array(d),p,n);for(var m,b,w=0,x=0;w<g;++w)if(m=y[w]){for(x<=w&&(x=w+1);!(b=v[x])&&++x<g;);m._next=b||null}}return(a=new $(a,i))._enter=c,a._exit=l,a},enter:function(){return new $(this._enter||this._groups.map(t),this._parents)},exit:function(){return new $(this._exit||this._groups.map(t),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=n&&(i=(i=n(i))&&i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,n=this._groups,e=t._groups,r=n.length,t=e.length,i=Math.min(r,t),o=new Array(r),u=0;u<i;++u)for(var a,c=n[u],l=e[u],f=c.length,s=o[u]=new Array(f),h=0;h<f;++h)(a=c[h]||l[h])&&(s[h]=a);for(;u<r;++u)o[u]=n[u];return new $(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];0<=--o;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e=e||N;for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],c=a.length,l=i[o]=new Array(c),f=0;f<c;++f)(u=a[f])&&(l[f]=u);l.sort(t)}return new $(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t,n=0,e=Tt(this);try{for(e.s();!(t=e.n()).done;){t.value;++n}}catch(t){e.e(t)}finally{e.f()}return n},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=u(t);if(arguments.length<2){t=this.node();return e.local?t.getAttributeNS(e.space,e.local):t.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):(e=this.node(),t=t,e.style.getPropertyValue(t)||U(e).getComputedStyle(e,null).getPropertyValue(t))},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=D(t+"");if(arguments.length<2){for(var r=E(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?O:F)(this,t)}}:n?function(t){return function(){O(this,t)}}:function(t){return function(){F(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?I:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Y:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(H)},lower:function(){return this.each(L)},append:function(t){var n="function"==typeof t?t:g(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:g(t),r=null==n?R:"function"==typeof n?n:y(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(z)},clone:function(t){return this.select(t?P:q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}),u=o.length;if(!(arguments.length<2)){for(a=n?G:B,r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,l=0,f=a.length;l<f;++l)for(r=0,c=a[l];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return Z(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return Z(this,t,n)}})(t,n))}},lt=Symbol.iterator,ft=Q,(lt=function(t){t=function(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return("string"===n?String:Number)(t);n=e.call(t,n||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==typeof t?t:t+""}(lt))in st?Object.defineProperty(st,lt,{value:ft,enumerable:!0,configurable:!0,writable:!0}):st[lt]=ft,st);var tt=J(X).right;J(function(t){return null===t?NaN:+t}).center;var nt=Math.sqrt(50),et=Math.sqrt(10),rt=Math.sqrt(2);function it(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),e=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/e;return nt<=r?e*=10:et<=r?e*=5:rt<=r&&(e*=2),n<t?-e:e}function ot(t,n){var e;if(void 0===n){var r,i=Tt(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(e<o||void 0===e&&o<=o)&&(e=o)}}catch(t){i.e(t)}finally{i.f()}}else{var u,a,c=-1,l=Tt(t);try{for(l.s();!(u=l.n()).done;)null!=(a=n(a=u.value,++c,t))&&(e<a||void 0===e&&a<=a)&&(e=a)}catch(t){l.e(t)}finally{l.f()}}return e}function ut(t,n,e){(t.prototype=n.prototype=e).constructor=t}function at(t,n){var e,r=Object.create(t.prototype);for(e in n)r[e]=n[e];return r}function ct(){}var lt="\\s*([+-]?\\d+)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ht=/^#([0-9a-f]{3,8})$/,dt=new RegExp("^rgb\\(".concat(lt,",").concat(lt,",").concat(lt,"\\)$")),pt=new RegExp("^rgb\\(".concat(st,",").concat(st,",").concat(st,"\\)$")),gt=new RegExp("^rgba\\(".concat(lt,",").concat(lt,",").concat(lt,",").concat(ft,"\\)$")),yt=new RegExp("^rgba\\(".concat(st,",").concat(st,",").concat(st,",").concat(ft,"\\)$")),vt=new RegExp("^hsl\\(".concat(ft,",").concat(st,",").concat(st,"\\)$")),mt=new RegExp("^hsla\\(".concat(ft,",").concat(st,",").concat(st,",").concat(ft,"\\)$")),bt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wt(){return this.rgb().formatHex()}function xt(){return this.rgb().formatRgb()}function _t(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=ht.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Mt(n):3===e?new Ut(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Ct(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Ct(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=dt.exec(t))?new Ut(n[1],n[2],n[3],1):(n=pt.exec(t))?new Ut(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=gt.exec(t))?Ct(n[1],n[2],n[3],n[4]):(n=yt.exec(t))?Ct(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=vt.exec(t))?It(n[1],n[2]/100,n[3]/100,1):(n=mt.exec(t))?It(n[1],n[2]/100,n[3]/100,n[4]):bt.hasOwnProperty(t)?Mt(bt[t]):"transparent"===t?new Ut(NaN,NaN,NaN,0):null}function Mt(t){return new Ut(t>>16&255,t>>8&255,255&t,1)}function Ct(t,n,e,r){return new Ut(t=r<=0?n=e=NaN:t,n,e,r)}function Nt(t,n,e,r){return 1===arguments.length?(i=(i=t)instanceof ct?i:_t(i))?new Ut((i=i.rgb()).r,i.g,i.b,i.opacity):new Ut:new Ut(t,n,e,null==r?1:r);var i}function Ut(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Dt(){return"#".concat(Ft(this.r)).concat(Ft(this.g)).concat(Ft(this.b))}function Et(){var t=jt(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(Ot(this.r),", ").concat(Ot(this.g),", ").concat(Ot(this.b)).concat(1===t?")":", ".concat(t,")"))}function jt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ot(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ft(t){return((t=Ot(t))<16?"0":"")+t.toString(16)}function It(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||1<=e?t=n=NaN:n<=0&&(t=NaN),new Ht(t,n,e,r)}function Yt(t){if(t instanceof Ht)return new Ht(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof ct)?_t(t):t))return new Ht;if(t instanceof Ht)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,c=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=c<.5?o+i:2-o-i,u*=60):a=0<c&&c<1?0:u,new Ht(u,a,c,t.opacity)}function Ht(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Lt(t){return(t=(t||0)%360)<0?t+360:t}function Rt(t){return Math.max(0,Math.min(1,t||0))}function zt(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}ut(ct,_t,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:wt,formatHex:wt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Yt(this).formatHsl()},formatRgb:xt,toString:xt}),ut(Ut,Nt,at(ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ut(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ut(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new Ut(Ot(this.r),Ot(this.g),Ot(this.b),jt(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dt,formatHex:Dt,formatHex8:function(){return"#".concat(Ft(this.r)).concat(Ft(this.g)).concat(Ft(this.b)).concat(Ft(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Et,toString:Et})),ut(Ht,function(t,n,e,r){return 1===arguments.length?Yt(t):new Ht(t,n,e,null==r?1:r)},at(ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ht(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ht(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*n,e=2*e-n;return new Ut(zt(240<=t?t-240:120+t,e,n),zt(t,e,n),zt(t<120?240+t:t-120,e,n),this.opacity)},clamp:function(){return new Ht(Lt(this.h),Rt(this.s),Rt(this.l),jt(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=jt(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(Lt(this.h),", ").concat(100*Rt(this.s),"%, ").concat(100*Rt(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));var qt=function(t){return function(){return t}};function Pt(o){return 1==(o=+o)?Bt:function(t,n){return n-t?(e=t,r=n,i=o,e=Math.pow(e,i),r=Math.pow(r,i)-e,i=1/i,function(t){return Math.pow(e+t*r,i)}):qt(isNaN(t)?n:t);var e,r,i}}function Bt(t,n){var e,r,i=n-t;return i?(e=t,r=i,function(t){return e+t*r}):qt(isNaN(t)?n:t)}var Gt=function t(n){var u=Pt(n);function e(n,t){var e=u((n=Nt(n)).r,(t=Nt(t)).r),r=u(n.g,t.g),i=u(n.b,t.b),o=Bt(n.opacity,t.opacity);return function(t){return n.r=e(t),n.g=r(t),n.b=i(t),n.opacity=o(t),n+""}}return e.gamma=t,e}(1);function Zt(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Vt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qt=new RegExp(Vt.source,"g");function Wt(t,n){var e,r=_(n);return null==n||"boolean"===r?qt(n):("number"===r?Zt:"string"===r?(e=_t(n))?(n=e,Gt):function(t,r){var n,e,i,o,u,a=Vt.lastIndex=Qt.lastIndex=0,c=-1,l=[],f=[];for(t+="",r+="";(n=Vt.exec(t))&&(e=Qt.exec(r));)(i=e.index)>a&&(i=r.slice(a,i),l[c]?l[c]+=i:l[++c]=i),(n=n[0])===(e=e[0])?l[c]?l[c]+=e:l[++c]=e:(l[++c]=null,f.push({i:c,x:Zt(n,e)})),a=Qt.lastIndex;return a<r.length&&(i=r.slice(a),l[c]?l[c]+=i:l[++c]=i),l.length<2?f[0]?(u=f[0].x,function(t){return u(t)+""}):(o=r,function(){return o}):(r=f.length,function(t){for(var n,e=0;e<r;++e)l[(n=f[e]).i]=n.x(t);return l.join("")})}:n instanceof _t?Gt:n instanceof Date?function(n,e){var r=new Date;return n=+n,e=+e,function(t){return r.setTime(n*(1-t)+e*t),r}}:(e=n,!ArrayBuffer.isView(e)||e instanceof DataView?Array.isArray(n)?function(t,n){for(var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),u=0;u<r;++u)i[u]=Wt(t[u],n[u]);for(;u<e;++u)o[u]=n[u];return function(t){for(u=0;u<r;++u)o[u]=i[u](t);return o}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var e,r={},i={};for(e in null!==t&&"object"===_(t)||(t={}),n=null===n||"object"!==_(n)?{}:n)e in t?r[e]=Wt(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}:Zt:function(n,e){e=e||[];var r,i=n?Math.min(e.length,n.length):0,o=e.slice();return function(t){for(r=0;r<i;++r)o[r]=n[r]*(1-t)+e[r]*t;return o}}))(t,n)}function $t(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Xt(t){return+t}var Jt=[0,1];function Kt(t){return t}function tn(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:(t=isNaN(e)?NaN:.5,function(){return t});var t}function nn(t,n,e){var r=t[0],t=t[1],i=n[0],n=n[1],i=t<r?(r=tn(t,r),e(n,i)):(r=tn(r,t),e(i,n));return function(t){return i(r(t))}}function en(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),u=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<r;)i[u]=tn(e[u],e[u+1]),o[u]=n(t[u],t[u+1]);return function(t){var n=tt(e,t,1,r)-1;return o[n](i[n](t))}}function rn(){var e,r,n,i,o,u,a=Jt,c=Jt,l=Wt,f=Kt;function s(){var n,e,t,r=Math.min(a.length,c.length);return f!==Kt&&(n=a[0],(e=a[r-1])<n&&(t=n,n=e,e=t),f=function(t){return Math.max(n,Math.min(e,t))}),i=2<r?en:nn,o=u=null,h}function h(t){return null==t||isNaN(t=+t)?n:(o=o||i(a.map(e),c,l))(e(f(t)))}return h.invert=function(t){return f(r((u=u||i(c,a.map(e),Zt))(t)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Xt),s()):a.slice()},h.range=function(t){return arguments.length?(c=Array.from(t),s()):c.slice()},h.rangeRound=function(t){return c=Array.from(t),l=$t,s()},h.clamp=function(t){return arguments.length?(f=!!t||Kt,s()):f!==Kt},h.interpolate=function(t){return arguments.length?(l=t,s()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(t,n){return e=t,r=n,s()}}var on=new Date,un=new Date;function an(o,u,e,r){function a(t){return o(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return o(t=new Date(+t)),t},a.ceil=function(t){return o(t=new Date(t-1)),u(t,1),o(t),t},a.round=function(t){var n=a(t),e=a.ceil(t);return t-n<e-t?n:e},a.offset=function(t,n){return u(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(t,n,e){var r,i=[];if(t=a.ceil(t),e=null==e?1:Math.floor(e),!(t<n&&0<e))return i;for(;i.push(r=new Date(+t)),u(t,e),o(t),r<t&&t<n;);return i},a.filter=function(e){return an(function(t){if(t<=t)for(;o(t),!e(t);)t.setTime(t-1)},function(t,n){if(t<=t)if(n<0)for(;++n<=0;)for(;u(t,-1),!e(t););else for(;0<=--n;)for(;u(t,1),!e(t););})},e&&(a.count=function(t,n){return on.setTime(+t),un.setTime(+n),o(on),o(un),Math.floor(e(on,un))},a.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?a.filter(r?function(t){return r(t)%n==0}:function(t){return a.count(0,t)%n==0}):a:null}),a}var cn=an(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});cn.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?an(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):cn:null};var ln=1e3,fn=6e4,sn=36e5,hn=864e5,dn=7*hn,pn=365*hn,gn=an(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+n*ln)},function(t,n){return(n-t)/ln},function(t){return t.getUTCSeconds()}),yn=an(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ln)},function(t,n){t.setTime(+t+n*fn)},function(t,n){return(n-t)/fn},function(t){return t.getMinutes()}),vn=an(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ln-t.getMinutes()*fn)},function(t,n){t.setTime(+t+n*sn)},function(t,n){return(n-t)/sn},function(t){return t.getHours()}),mn=an(function(t){return t.setHours(0,0,0,0)},function(t,n){return t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fn)/hn},function(t){return t.getDate()-1});function bn(n){return an(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fn)/dn})}var wn=bn(0),xn=bn(1),_n=(bn(2),bn(3),bn(4)),Mn=(bn(5),bn(6),an(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Tn=an(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Tn.every=function(e){return isFinite(e=Math.floor(e))&&0<e?an(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var lt=an(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*fn)},function(t,n){return(n-t)/fn},function(t){return t.getUTCMinutes()}),st=an(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+n*sn)},function(t,n){return(n-t)/sn},function(t){return t.getUTCHours()}),An=an(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/hn},function(t){return t.getUTCDate()-1});function Sn(n){return an(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/dn})}var kn=Sn(0),Cn=Sn(1),Nn=(Sn(2),Sn(3),Sn(4)),ft=(Sn(5),Sn(6),an(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),Un=an(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});function Dn(o,t,n,e,r,i){var u=[[gn,1,ln],[gn,5,5e3],[gn,15,15e3],[gn,30,3e4],[i,1,fn],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,sn],[r,3,3*sn],[r,6,6*sn],[r,12,432e5],[e,1,hn],[e,2,2*hn],[n,1,dn],[t,1,2592e6],[t,3,7776e6],[o,1,pn]];function a(t,n,e){var r=Math.abs(n-t)/e,i=J(function(t){return At(t,3)[2]}).right(u,r);if(i===u.length)return o.every(it(t/pn,n/pn,e));if(0===i)return cn.every(Math.max(it(t,n,e),1));r=At(u[r/u[i-1][2]<u[i][2]/r?i-1:i],2),i=r[0],r=r[1];return i.every(r)}return[function(t,n,e){var r,i=n<t;return i&&(t=(r=[n,t])[0],n=r[1]),e=e&&"function"==typeof e.range?e:a(t,n,e),n=e?e.range(t,+n+1):[],i?n.reverse():n},a]}Un.every=function(e){return isFinite(e=Math.floor(e))&&0<e?an(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var ft=At(Dn(Un,ft,kn,An,st,lt),2),st=(ft[0],ft[1],At(Dn(Tn,Mn,wn,mn,vn,yn),2)),En=st[0],jn=st[1];function On(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Fn(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function In(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function Yn(t){var r=t.dateTime,i=t.date,o=t.time,n=t.periods,e=t.days,u=t.shortDays,a=t.months,c=t.shortMonths,l=Bn(n),f=Gn(n),s=Bn(e),h=Gn(e),d=Bn(u),p=Gn(u),g=Bn(a),y=Gn(a),v=Bn(c),m=Gn(c),b={a:function(t){return u[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:he,e:he,f:ve,g:Ce,G:Ue,H:de,I:pe,j:ge,L:ye,m:me,M:be,p:function(t){return n[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ke,s:tr,S:we,u:xe,U:_e,V:Te,w:Ae,W:Se,x:null,X:null,y:ke,Y:Ne,Z:De,"%":Je},w={a:function(t){return u[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Ee,e:Ee,f:Ye,g:Qe,G:$e,H:je,I:Oe,j:Fe,L:Ie,m:He,M:Le,p:function(t){return n[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ke,s:tr,S:Re,u:ze,U:qe,V:Be,w:Ge,W:Ze,x:null,X:null,y:Ve,Y:We,Z:Xe,"%":Je},x={a:function(t,n,e){n=d.exec(n.slice(e));return n?(t.w=p.get(n[0].toLowerCase()),e+n[0].length):-1},A:function(t,n,e){n=s.exec(n.slice(e));return n?(t.w=h.get(n[0].toLowerCase()),e+n[0].length):-1},b:function(t,n,e){n=v.exec(n.slice(e));return n?(t.m=m.get(n[0].toLowerCase()),e+n[0].length):-1},B:function(t,n,e){n=g.exec(n.slice(e));return n?(t.m=y.get(n[0].toLowerCase()),e+n[0].length):-1},c:function(t,n,e){return T(t,r,n,e)},d:ee,e:ee,f:ce,g:Jn,G:Xn,H:ie,I:ie,j:re,L:ae,m:ne,M:oe,p:function(t,n,e){n=l.exec(n.slice(e));return n?(t.p=f.get(n[0].toLowerCase()),e+n[0].length):-1},q:te,Q:fe,s:se,S:ue,u:Vn,U:Qn,V:Wn,w:Zn,W:$n,x:function(t,n,e){return T(t,i,n,e)},X:function(t,n,e){return T(t,o,n,e)},y:Jn,Y:Xn,Z:Kn,"%":le};function _(c,l){return function(t){var n,e,r,i=[],o=-1,u=0,a=c.length;for(t instanceof Date||(t=new Date(+t));++o<a;)37===c.charCodeAt(o)&&(i.push(c.slice(u,o)),null!=(e=Hn[n=c.charAt(++o)])?n=c.charAt(++o):e="e"===n?" ":"0",(r=l[n])&&(n=r(t,e)),i.push(n),u=o+1);return i.push(c.slice(u,o)),i.join("")}}function M(i,o){return function(t){var n,e,r=In(1900,void 0,1);if(T(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!o||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(n=4<(e=(n=Fn(In(r.y,0,1))).getUTCDay())||0===e?Cn.ceil(n):Cn(n),n=An.offset(n,7*(r.V-1)),r.y=n.getUTCFullYear(),r.m=n.getUTCMonth(),r.d=n.getUTCDate()+(r.w+6)%7):(n=4<(e=(n=On(In(r.y,0,1))).getDay())||0===e?xn.ceil(n):xn(n),n=mn.offset(n,7*(r.V-1)),r.y=n.getFullYear(),r.m=n.getMonth(),r.d=n.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),e="Z"in r?Fn(In(r.y,0,1)).getUTCDay():On(In(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(e+5)%7:r.w+7*r.U-(e+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Fn(r)):On(r)}}function T(t,n,e,r){for(var i,o,u=0,a=n.length,c=e.length;u<a;){if(c<=r)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=x[i in Hn?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=_(i,b),b.X=_(o,b),b.c=_(r,b),w.x=_(i,w),w.X=_(o,w),w.c=_(r,w),{format:function(t){var n=_(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=_(t+="",w);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t+="",!0);return n.toString=function(){return t},n}}}var Hn={"-":"",_:" ",0:"0"},Ln=/^\s*\d+/,Rn=/^%/,zn=/[\\^$*+?|[\]().{}]/g;function qn(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<e?new Array(e-t+1).join(n)+i:i)}function Pn(t){return t.replace(zn,"\\$&")}function Bn(t){return new RegExp("^(?:"+t.map(Pn).join("|")+")","i")}function Gn(t){return new Map(t.map(function(t,n){return[t.toLowerCase(),n]}))}function Zn(t,n,e){n=Ln.exec(n.slice(e,e+1));return n?(t.w=+n[0],e+n[0].length):-1}function Vn(t,n,e){n=Ln.exec(n.slice(e,e+1));return n?(t.u=+n[0],e+n[0].length):-1}function Qn(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.U=+n[0],e+n[0].length):-1}function Wn(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.V=+n[0],e+n[0].length):-1}function $n(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.W=+n[0],e+n[0].length):-1}function Xn(t,n,e){n=Ln.exec(n.slice(e,e+4));return n?(t.y=+n[0],e+n[0].length):-1}function Jn(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.y=+n[0]+(68<+n[0]?1900:2e3),e+n[0].length):-1}function Kn(t,n,e){n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function te(t,n,e){n=Ln.exec(n.slice(e,e+1));return n?(t.q=3*n[0]-3,e+n[0].length):-1}function ne(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.m=n[0]-1,e+n[0].length):-1}function ee(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.d=+n[0],e+n[0].length):-1}function re(t,n,e){n=Ln.exec(n.slice(e,e+3));return n?(t.m=0,t.d=+n[0],e+n[0].length):-1}function ie(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.H=+n[0],e+n[0].length):-1}function oe(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.M=+n[0],e+n[0].length):-1}function ue(t,n,e){n=Ln.exec(n.slice(e,e+2));return n?(t.S=+n[0],e+n[0].length):-1}function ae(t,n,e){n=Ln.exec(n.slice(e,e+3));return n?(t.L=+n[0],e+n[0].length):-1}function ce(t,n,e){n=Ln.exec(n.slice(e,e+6));return n?(t.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function le(t,n,e){n=Rn.exec(n.slice(e,e+1));return n?e+n[0].length:-1}function fe(t,n,e){n=Ln.exec(n.slice(e));return n?(t.Q=+n[0],e+n[0].length):-1}function se(t,n,e){n=Ln.exec(n.slice(e));return n?(t.s=+n[0],e+n[0].length):-1}function he(t,n){return qn(t.getDate(),n,2)}function de(t,n){return qn(t.getHours(),n,2)}function pe(t,n){return qn(t.getHours()%12||12,n,2)}function ge(t,n){return qn(1+mn.count(Tn(t),t),n,3)}function ye(t,n){return qn(t.getMilliseconds(),n,3)}function ve(t,n){return ye(t,n)+"000"}function me(t,n){return qn(t.getMonth()+1,n,2)}function be(t,n){return qn(t.getMinutes(),n,2)}function we(t,n){return qn(t.getSeconds(),n,2)}function xe(t){t=t.getDay();return 0===t?7:t}function _e(t,n){return qn(wn.count(Tn(t)-1,t),n,2)}function Me(t){var n=t.getDay();return 4<=n||0===n?_n(t):_n.ceil(t)}function Te(t,n){return t=Me(t),qn(_n.count(Tn(t),t)+(4===Tn(t).getDay()),n,2)}function Ae(t){return t.getDay()}function Se(t,n){return qn(xn.count(Tn(t)-1,t),n,2)}function ke(t,n){return qn(t.getFullYear()%100,n,2)}function Ce(t,n){return qn((t=Me(t)).getFullYear()%100,n,2)}function Ne(t,n){return qn(t.getFullYear()%1e4,n,4)}function Ue(t,n){var e=t.getDay();return qn((t=4<=e||0===e?_n(t):_n.ceil(t)).getFullYear()%1e4,n,4)}function De(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+qn(t/60|0,"0",2)+qn(t%60,"0",2)}function Ee(t,n){return qn(t.getUTCDate(),n,2)}function je(t,n){return qn(t.getUTCHours(),n,2)}function Oe(t,n){return qn(t.getUTCHours()%12||12,n,2)}function Fe(t,n){return qn(1+An.count(Un(t),t),n,3)}function Ie(t,n){return qn(t.getUTCMilliseconds(),n,3)}function Ye(t,n){return Ie(t,n)+"000"}function He(t,n){return qn(t.getUTCMonth()+1,n,2)}function Le(t,n){return qn(t.getUTCMinutes(),n,2)}function Re(t,n){return qn(t.getUTCSeconds(),n,2)}function ze(t){t=t.getUTCDay();return 0===t?7:t}function qe(t,n){return qn(kn.count(Un(t)-1,t),n,2)}function Pe(t){var n=t.getUTCDay();return 4<=n||0===n?Nn(t):Nn.ceil(t)}function Be(t,n){return t=Pe(t),qn(Nn.count(Un(t),t)+(4===Un(t).getUTCDay()),n,2)}function Ge(t){return t.getUTCDay()}function Ze(t,n){return qn(Cn.count(Un(t)-1,t),n,2)}function Ve(t,n){return qn(t.getUTCFullYear()%100,n,2)}function Qe(t,n){return qn((t=Pe(t)).getUTCFullYear()%100,n,2)}function We(t,n){return qn(t.getUTCFullYear()%1e4,n,4)}function $e(t,n){var e=t.getUTCDay();return qn((t=4<=e||0===e?Nn(t):Nn.ceil(t)).getUTCFullYear()%1e4,n,4)}function Xe(){return"+0000"}function Je(){return"%"}function Ke(t){return+t}function tr(t){return Math.floor(+t/1e3)}var nr=(lt=Yn({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,er=lt.parse,ft=lt.utcFormat,st=lt.utcParse,lt="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||ft(lt);var rr=+new Date("2000-01-01T00:00:00.000Z")?function(t){return t=new Date(t),isNaN(t)?null:t}:st(lt);function ir(t){return new Date(t)}function or(t){return t instanceof Date?+t:+new Date(+t)}function ur(e,a,n,r,i,o,u,c,l,f){var s=rn()(Kt,Kt),h=s.invert,d=s.domain,p=f(".%L"),g=f(":%S"),y=f("%I:%M"),v=f("%I %p"),m=f("%a %d"),b=f("%b %d"),w=f("%B"),x=f("%Y");function _(t){return(l(t)<t?p:c(t)<t?g:u(t)<t?y:o(t)<t?v:r(t)<t?i(t)<t?m:b:n(t)<t?w:x)(t)}return s.invert=function(t){return new Date(h(t))},s.domain=function(t){return arguments.length?d(Array.from(t,or)):d().map(ir)},s.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},s.tickFormat=function(t,n){return null==n?_:f(n)},s.nice=function(t){var n,e,r,i,o,u=d();return(t=!t||"function"!=typeof t.range?a(u[0],u[u.length-1],null==t?10:t):t)?d((e=t,r=0,i=(n=(n=u).slice()).length-1,o=n[r],(t=n[i])<o&&(u=r,r=i,i=u,u=o,o=t,t=u),n[r]=e.floor(o),n[i]=e.ceil(t),n)):s},s.copy=function(){return t=s,ur(e,a,n,r,i,o,u,c,l,f).domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},s}function ar(){return function(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}.apply(ur(En,jn,Tn,Mn,wn,mn,vn,yn,gn,nr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var cr={second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:00",day:"%Y-%m-%d",week:"%Y week %W",month:"%Y-%m",quarter:"%Y-Q%Q",year:"%Y"};function lr(i){return Object.keys(i).reduce(function(t,n){var e,r;return t[n]=(e=t,r=i[n],function(t){return r(t),e}),t},{})}var fr="milestones",sr=fr+"__category_label",hr=fr+"__group",dr=hr+"__label",pr=dr+"-last",gr=dr+"-above",yr=dr+"-below",vr=dr+"__text",mr=vr+"__title",br=vr+"__event",wr=br+"--hover",xr={DISTRIBUTION:"top-bottom",OPTIMIZE:!1,ORIENTATION:"horizontal",MAPPING:{category:void 0,entries:void 0,timestamp:"timestamp",text:"text",url:"url",textStyle:"textStyle",titleStyle:"titleStyle"},LABEL_FORMAT:"%Y-%m-%d %H:%M",USE_LABELS:!0,AGGREGATE_BY:"minute",AUTO_RESIZE:!0,URL_TARGET:"_self"};function _r(t,n){t%=2;return"top"===n?t=!0:"bottom"===n&&(t=!1),0<t}var Mr="$";function Tr(){}function Ar(t,n){var e=new Tr;if(t instanceof Tr)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}function Sr(){var h,d,n,p=[],u=[];function g(t,e,r,i){if(e>=p.length)return null!=h&&t.sort(h),null!=d?d(t):t;for(var n,o,u,a=-1,c=t.length,l=p[e++],f=Ar(),s=r();++a<c;)(u=f.get(n=l(o=t[a])+""))?u.push(o):f.set(n,[o]);return f.each(function(t,n){i(s,n,g(t,e,r,i))}),s}return n={object:function(t){return g(t,0,kr,Cr)},map:function(t){return g(t,0,Nr,Ur)},entries:function(t){return function e(t,r){if(++r>p.length)return t;var i,o=u[r-1];return null!=d&&r>=p.length?i=t.entries():(i=[],t.each(function(t,n){i.push({key:n,values:e(t,r)})})),null!=o?i.sort(function(t,n){return o(t.key,n.key)}):i}(g(t,0,Nr,Ur),0)},key:function(t){return p.push(t),n},sortKeys:function(t){return u[p.length-1]=t,n},sortValues:function(t){return h=t,n},rollup:function(t){return d=t,n}}}function kr(){return{}}function Cr(t,n,e){t[n]=e}function Nr(){return Ar()}function Ur(t,n,e){t.set(n,e)}function Dr(){}Tr.prototype=Ar.prototype={constructor:Tr,has:function(t){return Mr+t in this},get:function(t){return this[Mr+t]},set:function(t,n){return this[Mr+t]=n,this},remove:function(t){t=Mr+t;return t in this&&delete this[t]},clear:function(){for(var t in this)t[0]===Mr&&delete this[t]},keys:function(){var t,n=[];for(t in this)t[0]===Mr&&n.push(t.slice(1));return n},values:function(){var t,n=[];for(t in this)t[0]===Mr&&n.push(this[t]);return n},entries:function(){var t,n=[];for(t in this)t[0]===Mr&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var t,n=0;for(t in this)t[0]===Mr&&++n;return n},empty:function(){for(var t in this)if(t[0]===Mr)return!1;return!0},each:function(t){for(var n in this)n[0]===Mr&&t(this[n],n.slice(1),this)}};lt=Ar.prototype;function Er(yt,t,vt,n,e,mt,r,bt,wt){console.time("optimize");var i,xt="horizontal"===mt,_t=xt?"height":"width",Mt=xt?"width":"height",o=xt?"padding-bottom":"padding-right",u=xt?"padding-top":"padding-left",a=Tt(Sr().key(function(t){return kt(t).data()[0].timelineIndex}).entries(r._groups));try{for(a.s();!(i=a.n()).done;){var c=i.value,l=c.values.filter(function(t){return Hr(St(t[0])).classed("".concat(gr,"-").concat(mt))}),f=c.values.filter(function(t){return Hr(St(t[0])).classed("".concat(yr,"-").concat(mt))}),s=function(ht,t){var n,dt=1,pt=0,gt=t?o:u,e=Tt(ht);try{for(e.s();!(n=e.n()).done;){var r=n.value,i=Hr(kt(r));i.attr("data-adjusted",!1),i.classed("".concat(pr,"-").concat(mt),!1),i.style(gt,xt?"0px":"10px")}}catch(t){e.e(t)}finally{e.f()}for(;0<dt&&pt<ht.length+10;)!function(){console.log("iteration",pt),pt++;var t,n=dt=0,e=0,i=Array(ht.length),r=Tt(ht.entries());try{for(r.s();!(t=r.n()).done;){var o=At(t.value,2),u=o[0],a=o[1],c=kt(a).data()[0],l=Hr(kt(a)),f=l.classed("".concat(pr,"-").concat(mt)),s=l.style(gt),h=l.attr("data-adjusted"),d=wt(yt(c.key)),p=St(a[0]).node().getBoundingClientRect();p.padding=parseFloat(s.split("px")[0]),p.backwards=f,p.text=c.key,p.index=u,p.offset=d,p.adjusted="true"===h,i[u]=p,n=Math.max(n,p[_t]+p.padding),e=Math.max(e,p[_t])}}catch(t){r.e(t)}finally{r.f()}n*=2,dt=i.reduce(function(t,n){return t+(xt&&n[Mt]<jr[mt])||!xt&&!n.adjusted?1:0},0);var g=bt,y=n,v=Math.round(xt?e:0),m=Lr(g,y,i,ht,xt),b=Ir(g,y,v),w=void 0,x=void 0,_=i.reduce(function(t,n){var e=t?t[_t]+t.padding:Number.POSITIVE_INFINITY;if(n[Mt]<jr[mt])return t;if(e<n[_t]+n.padding)return t;var r=i.find(function(t){return t.index===n.index-1&&(xt&&t[Mt]<jr[mt]||!xt&&!1===t.adjusted)}),e=i.find(function(t){return t.index===n.index+1&&(xt&&(t[Mt]<jr[mt]||!t.backwards&&t.offset+t[Mt]>bt)||!xt&&!1===t.adjusted)});return void 0!==r||void 0!==e?n:t},void 0);if(void 0!==_){w=void 0;if(0<_.index&&(w=i.find(function(t){return t.index===_.index-1&&(xt&&t[Mt]<jr[mt]||!xt&&!1===t.adjusted)}),x="before"),void 0===w&&_.index<i.length&&(H=i.find(function(t){return t.index===_.index+1&&(xt&&(t[Mt]<jr[mt]||!t.backwards&&t.offset+t[Mt]>bt)||!xt&&!1===t.adjusted)}),(void 0===w||void 0!==H&&w[_t]+w.padding>H[_t]+H.padding)&&(w=H,x="after")),void 0!==w){for(var M=!0,T=0,A=vt,S=0;!0===M&&T<1e3;){T++;var k=w[Mt]*w[_t],k=Math.max(20,Math.round(k/A)),C=Math.round("before"===x?w.offset:w.offset-A-2),N=Math.round(y-S-k),U=Math.round(A);if(Fr&&b&&(b.fillStyle="rgba(192,0,128,0.1)",b.fillRect(C,N,U,k),b.fillStyle="rgba(0,0,0,1)",b.fillText(w.text,C+5,N+5)),M=!1,bt<C+U&&"after"===x)M=!0;else if(C<0)M=!0;else{var D,E=Tt(Array(k).fill(!0).entries());try{for(E.s();!(D=E.n()).done;){var j,O=At(D.value,1)[0],F=Tt(Array(U).fill(!0).entries());try{for(F.s();!(j=F.n()).done;){var I=At(j.value,1)[0];if(void 0!==m[N+O-1]&&!1!==m[N+O-1][C+I]&&m[N+O-1][C+I]!==w.index+1){M=!0;break}}}catch(t){F.e(t)}finally{F.f()}if(M)break}}catch(t){E.e(t)}finally{E.f()}}M&&(A-Or>jr[mt]?A-=Or:(A=vt,S+=Or))}var Y="after"===x,v=Hr(St(ht[w.index][0]));v.attr("data-adjusted",!0),v.classed("".concat(pr,"-").concat(mt),Y),v.style(gt,"".concat(S=xt?S:S+10,"px"));var H=xt?5:0;v.style(Mt,"".concat(A+H,"px")),St(ht[w.index][0]).style(Mt,"".concat(A,"px"));Y=xt?Yr(ht[w.index][0]):parseFloat(v.select(".wrapper").style("height").split("px")[0]);Y+H<A&&(v.style(Mt,"".concat(Y+(xt?10:0),"px")),St(ht[w.index][0]).style(Mt,"".concat(Y+H,"px"))),i[w.index].padding=_[_t]+_.padding}}if(Fr&&b&&m)if(b.fillStyle="rgba(0,192,128,".concat(.3,")"),m.forEach(function(t,e){t.forEach(function(t,n){t&&(void 0===w||t!==w.index+1?b.fillStyle="rgba(0,".concat(50+10*t,",128,").concat(.3,")"):"boolean"!=typeof t&&i[t-1][Mt]<jr[mt]?b.fillStyle="rgba(255,0,0,".concat(.3,")"):b.fillStyle="rgba(255,128,0,".concat(.3,")"),b.fillRect(n,e,1,1))})}),void 0===_){var L,R=Tt(i);try{for(R.s();!(L=R.n()).done;){var z=L.value,q=.3+z[_t]/e*.9;z[Mt]>=jr[mt]?b.fillStyle="rgba(0,192,128,".concat(q,")"):b.fillStyle="rgba(255,128,0,".concat(q,")");var P=z.offset-(z.backwards?z[Mt]:0),B=y-z[_t]-(void 0!==z.padding?z.padding:0);b.fillRect(P,B,z[Mt],z[_t]),b.fillStyle="rgba(0,0,0,1)",b.fillText(z.text,5+P,5+B)}}catch(t){R.e(t)}finally{R.f()}}if(0===dt){var G,Z=Tt(i);try{for(Z.s();!(G=Z.n()).done;){var V=G.value;Fr&&b&&b.clearRect(0,0,g,y);var Q=!0,W=0,$=Math.round(V.offset-(V.backwards?V[Mt]:0)),X=Math.round(y-V[_t]-(void 0!==V.padding?V.padding:0)),J=Math.round(V[Mt]),K=Math.round(V[_t]);for(Fr&&b&&m.forEach(function(t,e){t.forEach(function(t,n){t&&(b.fillStyle="rgba(0,".concat(50+10*t,",128,").concat(.3,")"),b.fillRect(n,e,1,1))})});!0===Q&&W<1e3;){W++;var tt,nt,et,Q=!1,rt=Tt(Array(K).fill(!0).entries());try{for(rt.s();!(tt=rt.n()).done;){var it,ot=At(tt.value,1)[0],ut=Tt(Array(J).fill(!0).entries());try{for(ut.s();!(it=ut.n()).done;){var at=At(it.value,1)[0];if(m[X+ot-1]&&!1!==m[X+ot-1][$+at]&&m[X+ot-1][$+at]!==V.index+1){Q=!0;break}}}catch(t){ut.e(t)}finally{ut.f()}if(Q)break}}catch(t){rt.e(t)}finally{rt.f()}if(!Q){var ct,lt=Math.floor(void 0!==V.padding?V.padding:0),ft=Tt(Array(lt).fill(!0).entries());try{for(ft.s();!(ct=ft.n()).done;){var st=At(ct.value,1)[0];if(m[X+K+st-1]){if(!V.backwards&&!1!==m[X+K+st-1][$]&&m[X+K+st-1][$]!==V.index+1){Q=!0;break}if(V.backwards&&!1!==m[X+K+st-1][$+J-1]&&m[X+K+st-1][$+J-1]!==V.index+1){Q=!0;break}}}}catch(t){ft.e(t)}finally{ft.f()}}Q&&(Q=!1,dt++,(nt=Hr(St(ht[V.index][0]))).attr("data-adjusted",!1),nt.classed("".concat(pr,"-").concat(mt),!1),et=xt?5:0,nt.style(Mt,"".concat(jr[mt]-10+et,"px")),St(ht[V.index][0]).style(Mt,"".concat(jr[mt]-10,"px")),i[V.index].padding=0)}}}catch(t){Z.e(t)}finally{Z.f()}}}()};s(l,!0),s(f,!1)}}catch(t){a.e(t)}finally{a.f()}console.timeEnd("optimize")}var jr={horizontal:60,vertical:30},Or=10,Fr=!(Dr.prototype={constructor:Dr,has:lt.has,add:function(t){return this[Mr+(t+="")]=t,this},remove:lt.remove,clear:lt.clear,values:lt.keys,size:lt.size,empty:lt.empty,each:lt.each}),Ir=function(t,n,e){},Yr=function(t,n){var e=document.createRange(),t=t.childNodes[0];e.setStartBefore(t),e.setEndAfter(t);e=e.getBoundingClientRect();return Math.max(jr[n?"horizontal":"vertical"],Math.round(e.width))},Hr=function(t){return t.select(function(){return this.parentNode})},Lr=function(t,n,e,r,i){var o,u=Array.from({length:n},function(){return Array.from({length:t},function(){return!1})}),a=Tt(e);try{for(a.s();!(o=a.n()).done;){var c,l=o.value,f=l.index+1,s=i?l.width:l.height,h=i?l.height:l.width,d=Math.round(l.offset-(l.backwards?s:0)),p=Math.round(u.length-h-(void 0!==l.padding?l.padding:0)),g=Math.round(s),y=Math.round(h),v=Tt(Array(y).fill(!0).entries());try{for(v.s();!(c=v.n()).done;){var m,b=At(c.value,1)[0],w=Tt(Array(g).fill(!0).entries());try{for(w.s();!(m=w.n()).done;){var x=At(m.value,1)[0];u[p+b-1]&&void 0!==u[p+b-1][d+x-1]&&(u[p+b-1][d+x-1]=!1!==u[p+b-1][d+x-1]||f)}}catch(t){w.e(t)}finally{w.f()}}}catch(t){v.e(t)}finally{v.f()}var _,M=Math.floor(void 0!==l.padding?l.padding:0),T=Tt(Array(M).fill(!0).entries());try{for(T.s();!(_=T.n()).done;){var A=At(_.value,1)[0];u[p+y+A-1]&&(l.backwards||void 0===u[p+y+A-1][d-1]?l.backwards&&void 0!==u[p+y+A-1][d+g-2]&&(u[p+y+A-1][d+g-2]=!1!==u[p+y+A-1][d+g-2]||f):u[p+y+A-1][d-1]=!1!==u[p+y+A-1][d-1]||f)}}catch(t){T.e(t)}finally{T.f()}}}catch(t){a.e(t)}finally{a.f()}return u};function Rr(t){if("%Y-Q%Q"!==t)return nr(t);var e=nr(cr.month);return function(t){var n=e(t),t=n.split("-")[1],t=Math.ceil(parseInt(t)/3);return n.split("-")[0]+"-Q"+t}}function zr(t){if("%Y-Q%Q"!==t)return er(t);var e=er(cr.month);return function(t){if(-1===t.search("-Q")){var n=3*Math.ceil(parseInt(t.split("-")[1])/3)-2+"",n=n.length<2?"0"+n:n;return e(t.split("-")[0]+"-"+n)}n=3*parseInt(t.split("-")[1][1])+"",n=n.length<2?"0"+n:n;return e(t.split("-")[0]+"-"+n)}}function qr(n,t,e,r){function i(t){return n(r(t[e.timestamp]))}return void 0!==e.category&&void 0!==e.entries?t=t.map(function(t,n){return{category:t[e.category],entries:o(t[e.entries],n)}}):(t=void 0!==t&&!Array.isArray(t[0])?[t]:t).map(o);function o(t,e){return Sr().key(i).sortKeys(X).entries(t).map(function(t,n){return t.index=n,t.timelineIndex=e,t})}}return function(s){var h,d,p,g,y,v,m,b=xr.DISTRIBUTION,w=xr.OPTIMIZE,x=xr.ORIENTATION,_=rr,M=Object.assign({},xr.MAPPING);function n(t){h=Rr(t)}function t(t){p=t}function e(t){"string"==typeof t&&["_blank","_self","_parent","_top"].includes(t.toLowerCase())&&(g=t)}function T(t){return"function"==typeof y&&(St(this).classed(wr,!0),y(t)),t}function A(t){return"function"==typeof y&&(St(this).classed(wr,!1),v(t)),t}function S(t){return"function"==typeof m&&m(t),t}n(xr.LABEL_FORMAT),t(xr.USE_LABELS),e(xr.URL_TARGET);var k=Rr(cr[xr.AGGREGATE_BY]),C=zr(cr[xr.AGGREGATE_BY]),r={current:xr.AUTO_RESIZE};function i(t){var n="horizontal"===x?"width":"height",e="horizontal"===x?"margin-left":"margin-top",r="horizontal"===x?"milestones__horizontal_line":"milestones__vertical_line",i=St(s).selectAll("."+fr),a=void 0!==t?qr(k,t,M,_):i.data(),o=i.data(a),u=o.enter().append("div").attr("class",fr);o.exit().remove();t=parseFloat(St(s).style(n))-11;void 0!==M.category?(u.append("div").attr("class",sr).text(function(t){return t.category}),u.append("div").attr("class","data-js-timeline").append("div").attr("class",r)):u.append("div").attr("class",r);var i=o.merge(u),c=[],o=i.selectAll("."+sr);o.each(function(t,n,e){c.push(e[n].offsetWidth)});var u=Math.round(ot(c)||0),l=t-u-10;o.style("width",u+"px"),"vertical"===x&&(o.style("margin-left","-50%"),o.style("text-align","center")),i.selectAll(".data-js-timeline").style(e,u+10+"px"),i.selectAll("."+r).style(n,l+"px");var u=(void 0===M.category?i:i.selectAll(".data-js-timeline")).selectAll("."+hr).data(function(t){return void 0===M.category?t:t.entries}),r=a.reduce(function(n,t){return(void 0===M.category?t:t.entries).map(function(t){return n.push(t.key)}),n},[]),r=void 0!==d?d.map(C):function(t,n){var e,r;if(void 0===n){var i,o=Tt(t);try{for(o.s();!(i=o.n()).done;){var u=i.value;null!=u&&(void 0===e?u<=u&&(e=r=u):(u<e&&(e=u),r<u&&(r=u)))}}catch(t){o.e(t)}finally{o.f()}}else{var a,c,l=-1,f=Tt(t);try{for(f.s();!(a=f.n()).done;)null!=(c=n(c=a.value,++l,t))&&(void 0===e?c<=c&&(e=r=c):(c<e&&(e=c),r<c&&(r=c)))}catch(t){f.e(t)}finally{f.f()}}return[e,r]}(r,function(t){return C(t)}),f=ar().rangeRound([0,l]).domain(r),r=u.enter().append("div").attr("class",hr);u.exit().remove(),r.append("div").attr("class","milestones__group__bullet");u=r.merge(u).style(e,function(t){return f(C(t.key))+"px"});p?(n=(e=(e=u.selectAll("."+dr+"-"+x).data(function(t){return[t]})).enter().append("div").attr("class",dr+"-"+x).merge(e).classed(gr+"-"+x,function(t){return _r(t.index,b)}).classed(yr+"-"+x,function(t){return!_r(t.index,b)}).selectAll("."+vr+"-"+x).data(function(t){return[t]})).enter().append("div").attr("class",vr+"-"+x).merge(e).style(n,function(t){var n,e=f(C(t.key)),r=t.index+1,i="top-bottom"===b?2:1,i=void 0===M.category?(o=a[t.timelineIndex][t.index+i],n=a[t.timelineIndex][t.index-i],a[t.timelineIndex].length):(o=a[t.timelineIndex].entries[t.index+i],n=a[t.timelineIndex].entries[t.index-i],a[t.timelineIndex].entries.length),t="horizontal"===x?o:n,o="horizontal"===x?n:o;void 0!==t?(u=f(C(t.key)),u="horizontal"===x?u-e:e-u):i-r==1?u="horizontal"===x?l-e:e:i-r==0&&(u=void 0!==o?(o=f(C(o.key)),"horizontal"===x?(l-o)/2:o/2):l);var u=Math.max(0,u-6);return Math.min("horizontal"===x?180:u,u)+"px"}).each(function(t){var n=_r(t.index,b),e=St(this);e.html(null);var r,i,o=t.values.reduce(function(t,n){return void 0!==n[M.titleStyle]?Object.assign(t,n[M.titleStyle]):t},{}),u=e.append("div").classed("wrapper",!0);n&&"vertical"!==x||(r=u.append("span").classed(mr,!0).text(h(C(t.key))),Object.entries(o).forEach(function(t){var n=At(t,2),t=n[0],n=n[1];return r.style(t,n)}),u.append("br")),t.values.map(function(t,n){0<n&&u.append("br");var e=Object.assign({},t[M.textStyle]),n=t[M.text],r=-1<["jpg","jpeg","gif","png"].indexOf(n.split(".").pop())?u.append("img").classed("milestones-label",!0).classed("milestones-image-label",!0).attr("height","100").attr("src",n):(t[M.url]?u.append("a").classed("milestones-label",!0).classed("milestones-link-label",!0).attr("href",t[M.url]).attr("target",g):u.append("span").classed("milestones-label",!0).classed("milestones-text-label",!0)).text(n);r.datum({text:t[M.text],timestamp:t[M.timestamp],attributes:t}),"function"!=typeof m&&"function"!=typeof v&&"function"!=typeof y||r.classed(br,!0),"function"==typeof m&&r.on("click",S),"function"==typeof v&&r.on("mouseleave",A),"function"==typeof y&&r.on("mouseover",T),Object.entries(e).forEach(function(t){var n=At(t,2),t=n[0],n=n[1];return r.style(t,n)})}),n&&"horizontal"===x&&(u.append("br"),i=u.append("span").classed(mr,!0).text(h(C(t.key))),Object.entries(o).forEach(function(t){var n=At(t,2),t=n[0],n=n[1];return i.style(t,n)}))}),(n=e.merge(n)).style("padding-top","0px").style("padding-bottom","0px"),w&&Er(C,0,180,0,0,x,n,l,f)):u.selectAll("."+dr+"-"+x).remove(),i.each(function(t,n,e){var r=ot(St(e[n]).selectAll("* ."+gr+"-"+x)._groups[0],function(t){return t.offsetHeight}),i=ot(St(e[n]).selectAll("* :not(."+gr+"-"+x+")")._groups[0],function(t){return t.offsetHeight});"horizontal"===x?St(e[n]).style("margin-top",10+(r||0)+"px").style("height",10+(i||0)+"px"):(i=void 0!==M.category?Math.round(100/(a.length+1))*(n+1):"50",St(e[n]).style("margin-left",i+"%").style("position","absolute"))})}return new ResizeObserver(function(){null!==St(s).node()&&window.requestAnimationFrame(function(){r.current&&i()})}).observe("string"==typeof s?document.querySelector(s):s),lr({aggregateBy:function(t){k=Rr(cr[t]),C=zr(cr[t]),n(cr[t])},mapping:function(t){M=Object.assign({},M,t)},optimize:function(t){w=t},autoResize:function(t){r.current=t},orientation:function(t){x=t,St(s).html("")},distribution:function(t){b=t},parseTime:function(t){_=zr(t)},labelFormat:n,urlTarget:e,useLabels:t,range:function(t){Array.isArray(t)&&2==t.length&&(d=t)},render:i,onEventClick:function(t){m=t},onEventMouseLeave:function(t){v=t},onEventMouseOver:function(t){y=t}})}});